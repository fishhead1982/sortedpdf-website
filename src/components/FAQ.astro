---
const faqs = [
  {
    question: 'Is my data safe?',
    answer:
      'Absolutely. All your data is encrypted on your device using bank-grade AES-256 encryption. Your personal information never leaves your phone unless you explicitly share a filled PDF. Our backend proxy only processes images temporarily for AI detection — nothing is stored on our servers.',
  },
  {
    question: 'Is SortedPDF really free to start?',
    answer:
      'Yes! The Free plan gives you 3 form fills per month at no cost, no credit card required. It\'s perfect for trying out the AI auto-fill and seeing how much time you save.',
  },
  {
    question: 'What types of PDFs can SortedPDF handle?',
    answer:
      'SortedPDF works with any PDF form — government forms, tax returns, employment documents, medical forms, and more. Our AI can detect fields even on scanned paper forms that aren\'t digitally fillable.',
  },
  {
    question: 'Can I use SortedPDF offline?',
    answer:
      'Yes. Once your profile is set up, you can fill forms offline using your saved details. Only the initial AI field detection requires an internet connection.',
  },
  {
    question: 'What\'s included in each plan?',
    answer:
      'Free gives you 3 forms per month. Basic ($4.99/month) adds unlimited forms, 50 receipt scans with full data extraction, and removes watermarks. Pro ($19.99/month) adds unlimited receipts, multi-device sync, team access, and priority support.',
  },
  {
    question: 'Can I cancel my subscription anytime?',
    answer:
      'Yes, you can cancel anytime through your App Store or Google Play subscription settings. You\'ll continue to have access until the end of your current billing period.',
  },
  {
    question: 'Which countries is SortedPDF available in?',
    answer:
      'SortedPDF is available worldwide, with specific form recognition optimised for Australia, the United States, the United Kingdom, Canada, New Zealand, and Ireland.',
  },
];
---

<section
  class="py-20 lg:py-28 bg-white dark:bg-surface-900"
  aria-labelledby="faq-heading"
>
  <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">

    <!-- Section header -->
    <div class="text-center mb-12 reveal">
      <span class="inline-block px-3 py-1 mb-4 text-xs font-semibold uppercase tracking-widest text-brand-600 dark:text-brand-400 bg-brand-50 dark:bg-brand-950 rounded-full border border-brand-100 dark:border-brand-900">
        FAQ
      </span>
      <h2
        id="faq-heading"
        class="font-heading text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-4"
      >
        Common questions
      </h2>
      <p class="text-lg text-gray-600 dark:text-gray-400">
        Can't find your answer? Email us at{' '}
        <a href="mailto:hello@sortedpdf.com" class="text-brand-600 dark:text-brand-400 hover:underline">
          hello@sortedpdf.com
        </a>
      </p>
    </div>

    <!-- Accordion -->
    <div class="space-y-3 reveal" role="list">
      {faqs.map((faq, index) => (
        <details
          class="faq-item group bg-white dark:bg-surface-800 border border-gray-200 dark:border-surface-700 rounded-xl overflow-hidden shadow-sm hover:border-brand-300 dark:hover:border-brand-700 transition-colors duration-150"
          role="listitem"
        >
          <summary
            class="flex items-center justify-between gap-4 px-6 py-4 cursor-pointer list-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-brand-500 select-none"
            aria-label={faq.question}
          >
            <span class="font-heading font-semibold text-gray-900 dark:text-white text-sm sm:text-base pr-2">
              {faq.question}
            </span>
            <!-- Chevron icon -->
            <span
              class="flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 dark:bg-surface-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-open:bg-brand-100 dark:group-open:bg-brand-900 group-open:text-brand-600 dark:group-open:text-brand-400 transition-colors duration-150"
              aria-hidden="true"
            >
              <svg
                class="w-3.5 h-3.5 transition-transform duration-200 group-open:rotate-180"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                stroke-width="2.5"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </span>
          </summary>

          <!-- Answer — animated with CSS max-height trick -->
          <div class="faq-body px-6 pb-5">
            <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed border-t border-gray-100 dark:border-surface-700 pt-4">
              {faq.answer}
            </p>
          </div>
        </details>
      ))}
    </div>
  </div>
</section>

<style>
  /* Smooth open/close animation using CSS grid trick */
  details .faq-body {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.25s ease;
  }

  details[open] .faq-body {
    grid-template-rows: 1fr;
  }

  details .faq-body > * {
    overflow: hidden;
  }

  /* Override browser default marker */
  details > summary {
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
</style>

<script is:inline>
  // Keyboard enhancement: Enter/Space already handled by browser on summary elements.
  // Add smooth animation polyfill for browsers that don't support CSS grid animation.
  (function () {
    var items = document.querySelectorAll('.faq-item');
    items.forEach(function (item) {
      var summary = item.querySelector('summary');
      if (!summary) return;

      summary.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          item.open ? item.removeAttribute('open') : item.setAttribute('open', '');
        }
      });
    });
  })();
</script>
