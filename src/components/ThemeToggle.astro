---
import Sun from '@lucide/astro/icons/sun';
import Moon from '@lucide/astro/icons/moon';
---

<button
  id="theme-toggle"
  type="button"
  aria-label="Toggle dark mode"
  title="Toggle dark mode"
  class="relative inline-flex items-center justify-center w-9 h-9 rounded-lg text-gray-600 dark:text-gray-400 hover:text-brand-500 dark:hover:text-brand-400 hover:bg-gray-100 dark:hover:bg-surface-700 transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500"
>
  <!-- Sun: shown in dark mode (click to go light) -->
  <span class="hidden dark:block" aria-hidden="true">
    <Sun size={18} />
  </span>
  <!-- Moon: shown in light mode (click to go dark) -->
  <span class="block dark:hidden" aria-hidden="true">
    <Moon size={18} />
  </span>
</button>

<script is:inline>
  (function () {
    var btn = document.getElementById('theme-toggle');
    if (!btn) return;

    btn.addEventListener('click', function () {
      var html = document.documentElement;
      var isDark = html.classList.toggle('dark');
      try {
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      } catch (e) {}
    });
  })();
</script>
